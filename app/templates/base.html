<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>{% block title %}Yessenov ID{% endblock %}</title>
<link rel="stylesheet" href="{{ url_for('static', path='css/style.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
<div class="container">
<aside class="sidebar">
<div>
<div class="sidebar-header"><img src="{{ url_for('static', path='images/logo2.png') }}" alt="Yessenov Logo">YU SOLUTION</div>
<div class="user-section">
<div class="avatar">{% block user_avatar %}AT{% endblock %}</div>
<div class="user-info">
<div class="name">{% block user_name %}–ê–ª—å–±–∏–Ω–∞ –¢–∏–ª–µ–∫–±–∞–π{% endblock %}</div>
<div class="role">{% block user_role %}–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å{% endblock %}</div>
</div>
</div>
<nav class="sidebar-menu">
<ul>
<li><a href="#"><i class="fa-solid fa-newspaper icon"></i>–ù–æ–≤–æ—Å—Ç–∏</a></li>
<li><a href="#"><i class="fa-solid fa-calendar-days icon"></i>–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</a></li>
<li><a href="#"><i class="fa-solid fa-book icon"></i>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</a></li>
<li><a href="#"><i class="fa-solid fa-book-open icon"></i>–ù–∞—É–∫–∞</a></li>
<li><a href="#"><i class="fa-solid fa-people-group icon"></i>–í–æ—Å–ø–∏—Ç–∞–Ω–∏–µ</a></li>
<li><a href="#"><i class="fa-solid fa-folder-open icon"></i>–ï-—É—Å–ª—É–≥–∏</a></li>
<li><a href="#"><i class="fa-brands fa-android icon"></i>YessenovBot</a></li>
<li><a href="#"><i class="fa-solid fa-screwdriver-wrench icon"></i>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ</a></li>
</ul>
</nav>
</div>
<div class="sidebar-footer">
<ul>
<li><a href="#"><i class="fa-solid fa-briefcase icon"></i>–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</a></li>
<li><a href="#"><i class="fa-solid fa-gear icon"></i>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a></li>
{% if current_user %}<li><a href="/logout"><i class="fa-solid fa-right-from-bracket icon"></i>–í—ã–π—Ç–∏</a></li>{% else %}
<li><a href="javascript:void(0)" onclick="openLoginModal()"><i class="fa-solid fa-right-to-bracket"></i>–í–æ–π—Ç–∏</a></li>{% endif %}
</ul>
<div>
</div>
</div>
</aside>
<main class="main-content">
<div class="top-bar">
<div class="notifications">
<span class="bell">üîî</span>
<span class="badge">{% block notif_count %}6{% endblock %}</span>
</div>
<select>
<option>–†—É—Å—Å–∫–∏–π</option>
<option>English</option>
</select>
</div>
<div class="content">
{% block content %}{% endblock %}
</div>
</main>
</div>
{% if not current_user %}<div id="loginModal" class="modal" style="display:none;">
<div class="modal-content">
<span class="modal-close" onclick="closeLoginModal()">&times;</span>
<form method="post" action="/login" class="login-form" id="modalLoginForm" autocomplete="on">
<div class="form-title">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</div>
<div id="modal-login-error" class="form-errors" style="display:none;"></div>
<div class="form-row">
<label for="modal-username">–õ–æ–≥–∏–Ω:</label>
<input type="text" id="modal-username" name="username" required>
</div>
<div class="form-row">
<label for="modal-password">–ü–∞—Ä–æ–ª—å:</label>
<input type="password" id="modal-password" name="password" required minlength="6">
</div>
<button type="submit" class="btn site-btn">–í–æ–π—Ç–∏</button>
</form>
</div>
</div>{% endif %}
</body>
{% if not current_user %}<script>
function openLoginModal() {
document.getElementById('loginModal').style.display = 'block';
document.getElementById('modalLoginForm').reset();
document.getElementById('modal-login-error').style.display = 'none';
}
function closeLoginModal() {
document.getElementById('loginModal').style.display = 'none';
}
window.onclick = function(event) {
var modal = document.getElementById('loginModal');
if (event.target == modal) { modal.style.display = "none"; }
}
document.addEventListener("DOMContentLoaded", function() {
var form = document.getElementById("modalLoginForm");
if (form) {
form.onsubmit = async function(e) {
e.preventDefault();
var errDiv = document.getElementById('modal-login-error');
errDiv.style.display = "none";
errDiv.innerHTML = "";
var formData = new FormData(form);
let response = await fetch("/login", {
method: "POST",
body: formData,
headers: { "X-Requested-With": "XMLHttpRequest" }
});
if (response.ok) {
window.location.reload();
} else {
let errText = "–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞!";
try {
let data = await response.json();
errText = data.detail || errText;
} catch {}
errDiv.style.display = "block";
errDiv.innerHTML = "<ul><li>" + errText + "</li></ul>";
}
}
}
});
</script>{% endif %}
</html>
