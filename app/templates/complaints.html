{% extends "base.html" %}

{% block title %}–û—Å—Ç–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É ‚Äî Yessenov University{% endblock %}
{% block header_title %}–û—Å—Ç–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É{% endblock %}
{% block header_desc %}–ê–Ω–æ–Ω–∏–º–Ω–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ–¥–∞—á–∏ –∂–∞–ª–æ–±—ã. –í–∞—à–µ –∏–º—è –∏ e-mail –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã.{% endblock %}

{% block content %}
<div class="card complaint-form-card">
<form method="post" action="/complaints" class="complaint-form">
<div class="form-title">–û—Å—Ç–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É</div>
<label for="name_surname">–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è <span class="hint">(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span>:</label>
<input type="text" id="name_surname" name="name_surname" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
<label for="email">Email <span class="hint">(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span>:</label>
<input type="email" id="email" name="email" placeholder="you@example.com">
<label for="subject">–¢–µ–º–∞ –∂–∞–ª–æ–±—ã:</label>
<input type="text" id="subject" name="subject" placeholder="–¢–µ–º–∞ –≤–∞—à–µ–π –∂–∞–ª–æ–±—ã" required minlength="5" maxlength="100">
<label for="message">–¢–µ–∫—Å—Ç –∂–∞–ª–æ–±—ã:</label>
<textarea id="message" name="message" rows="5" required placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –∂–∞–ª–æ–±—É..." minlength="20"></textarea>
<button type="submit" class="btn site-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É</button>
</form>
</div>

<div class="content">
<h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∂–∞–ª–æ–±—ã</h2>
<p class="subtitle">–ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–æ—à–µ–¥—à–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏—é –∂–∞–ª–æ–±—ã.</p>
{% if complaints %}
<div class="complaints-grid">
{% for complaint in complaints %}
<div class="complaint-card">
<div class="complaint-header">
<div class="complaint-author">{{ complaint.name_surname or "–ê–Ω–æ–Ω–∏–º" }}</div>
<div class="complaint-date-tag">{{ complaint.created_at.strftime("%d.%m.%Y") }}</div>
<div class="complaint-reaction-buttons">
<button class="complaint-reaction-btn complaint-like-btn">üëç 5</button>
<button class="complaint-reaction-btn complaint-dislike-btn">üëé 0</button>
</div>
</div>
<div class="complaint-card-content">
<div class="complaint-content-header">
<div class="complaint-content-title">{{ complaint.subject }}</div>
<div class="complaint-content-reactions">
<div class="complaint-content-reaction">üí¨ 0</div>
</div>
</div>
<div class="complaint-content-text">{{ complaint.message }}</div>
{% if complaint.admin_response %}
<div class="complaint-response"><strong>–û—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> {{ complaint.admin_response }}</div>
{% endif %}
</div>
<div class="complaint-actions">
<form method="post" action="/complaints/{{ complaint.id }}/delete">
<button type="submit" class="btn delete-btn" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∂–∞–ª–æ–±—É?');"><i class="fa-solid fa-trash"></i></button>
</form>
</div>
</div>
{% endfor %}
</div>
<div class="pagination">
{% if has_prev %}
<a href="?page={{ current_page - 1 }}" class="btn outline">‚Üê –ù–∞–∑–∞–¥</a>
{% endif %}
<span>–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ current_page }} –∏–∑ {{ total_pages }}</span>
{% if has_next %}
<a href="?page={{ current_page + 1 }}" class="btn outline">–í–ø–µ—Ä—ë–¥ ‚Üí</a>
{% endif %}
</div>
{% else %}
<div class="no-complaints-msg">–ü–æ–∫–∞ –∂–∞–ª–æ–± –Ω–µ—Ç.</div>
{% endif %}

</div>
{% endblock %}